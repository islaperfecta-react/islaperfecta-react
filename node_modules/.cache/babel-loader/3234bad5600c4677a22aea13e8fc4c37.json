{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\justo\\\\Desktop\\\\islaperfecta_react\\\\src\\\\App.js\";\nimport React from 'react';\nimport io from \"socket.io-client\";\nimport $ from \"jquery\";\nimport logo from \"./logo.svg\";\nimport './App.css';\nconst colors = ['red', 'green', 'blue', 'magenta', 'purple', 'plum', 'orange'];\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: null,\n      color: colors[Math.floor(Math.random() * colors.length)],\n      uid: null,\n      message: '',\n      messages: []\n    };\n    this.socket = io('localhost:8080');\n    this.socket.on('RECEIVE_MESSAGE', function (data) {\n      /*addMessage(data);*/\n      alert(data);\n    });\n\n    const addMessage = data => {\n      let result = JSON.parse(data);\n\n      if (result.type == 'message') {\n        this.setState(state => {\n          const messages = [...state.messages, {\n            username: result.username,\n            color: result.color,\n            message: result.message,\n            timestamp: result.timestamp\n          }];\n          return {\n            messages\n          };\n        });\n      }\n\n      if (result.type == 'history') {\n        result.messageArray.map(message => this.setState(state => {\n          const messages = [{\n            username: message.username,\n            color: message.color,\n            message: message.message,\n            timestamp: message.timestamp\n          }, ...state.messages];\n        }));\n      }\n    };\n\n    this.sendMessage = () => {\n      this.socket.emit('SEND_MESSAGE', {\n        username: this.state.username,\n        color: this.state.color,\n        message: this.state.message,\n        type: 'message'\n      });\n      this.setState({\n        message: ''\n      });\n    };\n\n    this.handleKeyDown = e => {\n      if (e.keyCode === 13 && this.state.username === null) {\n        this.setState({\n          username: e.target.value\n        });\n      } else if (e.keyCode === 13 && this.state.username !== null) {\n        this.setState({\n          message: e.target.value\n        });\n        this.sendMessage();\n      }\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 5\n      }\n    }, this.state.messages.map(message => /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }\n    }, message.username, \": \", message.message))), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      onKeyDown: this.handleKeyDown,\n      placeholder: \"USERNAME\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 7\n      }\n    });\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/justo/Desktop/islaperfecta_react/src/App.js"],"names":["React","io","$","colors","App","Component","constructor","props","state","username","color","Math","floor","random","length","uid","message","messages","socket","on","data","alert","addMessage","result","JSON","parse","type","setState","timestamp","messageArray","map","sendMessage","emit","handleKeyDown","e","keyCode","target","value","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport io from \"socket.io-client\";\nimport $ from \"jquery\";\nimport logo from './logo.svg';\nimport './App.css';\nconst colors = [ 'red', 'green', 'blue', 'magenta', 'purple', 'plum', 'orange' ];\n\nclass App extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      username: null,\n      color: colors[ Math.floor( Math.random() * colors.length )],\n      uid: null,\n      message: '',\n      messages: []\n    }\n\n  this.socket = io('localhost:8080');\n\n  this.socket.on('RECEIVE_MESSAGE', function(data){\n      /*addMessage(data);*/\n      alert(data);\n  });\n\n  const addMessage = data => {\n    let result = JSON.parse(data);\n    if(result.type == 'message'){\n    this.setState(state => {\n      const messages = [...state.messages, {\n        username: result.username,\n        color: result.color,\n        message: result.message,\n        timestamp: result.timestamp,\n      }]\n      return{\n        messages,\n      }\n    })\n  }\n    if(result.type == 'history'){\n        result.messageArray.map(message =>\n          this.setState( state => {\n            const messages = [{\n              username: message.username,\n              color: message.color,\n              message: message.message,\n              timestamp: message.timestamp,\n            }, ...state.messages]\n          })\n      )}\n    }\n\n    this.sendMessage = () => {\n        this.socket.emit('SEND_MESSAGE', {\n            username: this.state.username,\n            color: this.state.color,\n            message: this.state.message,\n            type: 'message',\n        })\n        this.setState({message: ''});\n\n    }\n\n    this.handleKeyDown = (e) => {\n      if(e.keyCode === 13 && this.state.username === null){\n        this.setState({username: e.target.value});\n      }\n      else if (e.keyCode === 13 && this.state.username !== null){\n        this.setState({message: e.target.value});\n        this.sendMessage();\n      }\n    }\n}\n  render (){\n    return(\n    <div>\n      {this.state.messages.map(message =>\n        <p>\n        {message.username}: {message.message}\n      </p>\n    )}\n</div>,\n      <input type=\"text\" onKeyDown={this.handleKeyDown} placeholder=\"USERNAME\" />\n  )}\n\n  }\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}